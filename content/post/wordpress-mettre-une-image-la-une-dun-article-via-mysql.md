+++
image = "https://techan.fr/images/2014/10/SQL_term.png"
description = ""
draft = false
title = "[Wordpress] Mettre une image à la une d'un article via MySQL"
date = 2014-11-21T15:01:06Z
author = "MrRaph_"
categories = ["Image à la une","mettre une image à la une d un article via mysql","MySQL","WordPress"]
tags = ["Image à la une","mettre une image à la une d un article via mysql","MySQL","WordPress"]
slug = "wordpress-mettre-une-image-la-une-dun-article-via-mysql"

+++


Les images à la une (Featured Image) sur les articles WordPress, ça fait tout de suite classe et un certains effet visuel, avec une bonne image à la une, on arrive a en savoir plus sur le contenu de l’article alors que l’on a encore lu que le son titre.

Je me suis attelé à la tâche d’en ajouter les plus possible sur les articles que j’avais déjà produits, mais comme je suis u peu flemmard, j’ai cherché comment mettre une image à la une d’un article via MySQL afin de pas avoir a ouvrir toutes les pages de modification …  
  
  

J’ai trouvé un post sur le site  [wpmudev.org](http://premium.wpmudev.org/forums/topic/query-for-missing-featured-images). Ce brave Paul nous donne une requête qui liste tous les articles et les metas associées à l’image à la une.

mysql> SELECT p.ID, p.post_title, pm.* FROM wp_posts p -> LEFT JOIN wp_postmeta pm ON p.ID=pm.post_id AND pm.meta_key='_thumbnail_id' -> WHERE p.post_type in ('post') -> AND p.post_status in ('publish'); +-----+--------------------------------------------------------------------------------------+---------+---------+---------------+------------+ | ID | post_title | meta_id | post_id | meta_key | meta_value | +-----+--------------------------------------------------------------------------------------+---------+---------+---------------+------------+ | 8 | Flush du cache DNS | NULL | NULL | NULL | NULL | | 25 | Fichier Hosts sur Windows | NULL | NULL | NULL | NULL | | 27 | Ajouter des clefs SSH pour se connecter sur un boîtier RecoverPoint | 1318 | 27 | _thumbnail_id | 457 | | 29 | Désactiver les alertes par mail dans la crontab | 1319 | 29 | _thumbnail_id | 457 | | 31 | Création d'une VM Linux pour forwarder des paquets d'une IP à une autre | 1320 | 31 | _thumbnail_id | 457 | | 37 | Booster Apache avec des dossiers de cache en RAM | 1321 | 37 | _thumbnail_id | 457 | | 41 | Lancer des applis Android sur Chromes OS, Linux, Mac OS, Windows | NULL | NULL | NULL | NULL | | 50 | Et là, on remercie GTalk ! | NULL | NULL | NULL | NULL | | 57 | Quand Apple fait du Microsoft ... | NULL | NULL | NULL | NULL | | 67 | Plongée sous/au bureau ... | NULL | NULL | NULL | NULL | | 75 | [iOS] Désactiver la lecture automatique des vidéos sur FaceBook | NULL | NULL | NULL | NULL | | 83 | [Shellshock] Une nouvelle faille de sécurité découverte sur Mac OS et Linux | NULL | NULL | NULL | NULL | | 62 | [iPhone 6] Une page permettant de vérifier les stocks dans les Apple Store | NULL | NULL | NULL | NULL | | 92 | [imp] Importer juste une table dans un schéma. | 1267 | 92 | _thumbnail_id | 418 | | 96 | [iOS] L'update 8.0.2 est disponible ! | NULL | NULL | NULL | NULL | | 90 | [Shellshock] Apple annonce une mise à jour rapide | NULL | NULL | NULL | NULL | | 86 | [MySQL] Un outil qui donne des conseils d'optimisation | NULL | NULL | NULL | NULL | | 103 | [RedHat/Centos] Outil pour rescanner les bus SCSI et découvrir les disques ajoutés | 1322 | 103 | _thumbnail_id | 457 | | 107 | [LVM] Les bases | 1323 | 107 | _thumbnail_id | 457 | | 114 | [GoPro] La version 4 des caméras sportives est disponible ! | NULL | NULL | NULL | NULL | | 111 | La grande folie du Loto Bouse | NULL | NULL | NULL | NULL | | 128 | [MySQL] Importer un énorme fichier de dump | NULL | NULL | NULL | NULL | | 139 | [iPhone 6] La photo "mystérieuse" | NULL | NULL | NULL | NULL | | 147 | [App] Investigator, une app qui vous en dit plus sur vos photos ! | NULL | NULL | NULL | NULL | | 176 | [MySQL] Des chiffres sur quelques bases les plus sollicitées du monde | NULL | NULL | NULL | NULL | | 191 | [Linux] Envoyer des logs sur un serveur central avec rsyslog | 1324 | 191 | _thumbnail_id | 457 | | 197 | [Ubuntu] Un utilitaire pour nettoyer et configurer le système | NULL | NULL | NULL | NULL | | 200 | [RecoverPoint] Placer des flags nommés sur les points de consistance | 1325 | 200 | _thumbnail_id | 457 | | 216 | [Linux] Forcer un programme a utiliser une locale anglaise | 1326 | 216 | _thumbnail_id | 457 | | 206 | [logstash] Configuration des inputs, filter et output | 1327 | 206 | _thumbnail_id | 457 | | 223 | [Edité][Linux] Commande Find : astuces | 1317 | 223 | _thumbnail_id | 457 | | 237 | [Oracle] Identifier les bases de données démarrées sur une machine | 1273 | 237 | _thumbnail_id | 418 | | 240 | [Oracle] Gérer les directories | 1276 | 240 | _thumbnail_id | 418 | | 244 | [Oracle] Gérer les utilisateurs | 1279 | 244 | _thumbnail_id | 418 | | 251 | [Oracle] Les étapes d'arrêt et de démarrage. | 1282 | 251 | _thumbnail_id | 418 | | 257 | [Linux] Transformer votre Linux en Time Capsule | 718 | 257 | _thumbnail_id | 270 | | 257 | [Linux] Transformer votre Linux en Time Capsule | 1328 | 257 | _thumbnail_id | 457 | | 263 | [FireFox] Ajoute un petit jeu dans sa page de démarrage | 703 | 263 | _thumbnail_id | 264 | | 276 | [Linux] Astuce pour retrouver les permissions sur un fichier | 1329 | 276 | _thumbnail_id | 457 | | 278 | [Oracle] Afficher et modifier les paramètres Oracle | 1294 | 278 | _thumbnail_id | 418 | | 284 | [iOS] iOS 8.1 est disponible !! | 761 | 284 | _thumbnail_id | 283 | | 287 | [LVM] Agrandir un disque à chaud | 1330 | 287 | _thumbnail_id | 457 | | 289 | [Oracle] Récupérer le code SQL de création d'un objet | 1288 | 289 | _thumbnail_id | 418 | | 292 | [Windows] Synchroniser deux répertoires en conservant les permissions NTFS | NULL | NULL | NULL | NULL | | 294 | [Linux] Créer une copie bit à bit d'une clef USB | 1331 | 294 | _thumbnail_id | 457 | | 297 | [Oracle] Le listener | 1180 | 297 | _thumbnail_id | 418 | | 303 | [iTop] Configuration de l'authentification Active Directory | NULL | NULL | NULL | NULL | | 312 | [Varnish] Configurer Varnish pour booster WordPress | 1332 | 312 | _thumbnail_id | 457 | | 314 | [Windows] Créer des jonctions de dossiers | NULL | NULL | NULL | NULL | | 318 | [RedHat] Ajouter un disque à chaud, sans rescan-scsi-bus | 1333 | 318 | _thumbnail_id | 457 | | 323 | [NFS] Lister les partages NFS sur une machine distante | 1334 | 323 | _thumbnail_id | 457 | | 326 | [Ubuntu] Remplacer Unity par Gnome | 900 | 326 | _thumbnail_id | 327 | | 326 | [Ubuntu] Remplacer Unity par Gnome | 1335 | 326 | _thumbnail_id | 457 | | 329 | [Ubuntu] Activer le partage d'écran depuis la ligne de commande | 1311 | 329 | _thumbnail_id | 457 | | 331 | [BackupExec] Problème de backup de montages NFS | NULL | NULL | NULL | NULL | | 339 | [BackupExec] Mettre l'agent Linux en mode "debug" | NULL | NULL | NULL | NULL | | 341 | [Linux Tuning] Ajuster la swappiness | 1305 | 341 | _thumbnail_id | 457 | | 346 | [Apps] Retoucher ses photos et créer des GIF animés | 958 | 346 | _thumbnail_id | 347 | | 372 | [Ubuntu] Installer TeamViewer 9 sur Ubuntu 14.10 | 1004 | 372 | _thumbnail_id | 375 | | 377 | [iOS] La mise à jour 8.1.1 est arrivée ! | NULL | NULL | NULL | NULL | | 379 | [OSX] Yosemite 10.10.1 : la foire de la mise à jour chez Apple | NULL | NULL | NULL | NULL | | 392 | [OS X] Activer le partage de bureau à distance | NULL | NULL | NULL | NULL | | 396 | [Windows] Forcer l'utilisation des DNS Google | NULL | NULL | NULL | NULL | | 369 | [AirPlay] Transformez votre Ubuntu en serveur AirPlay avec ShairPort | 1299 | 369 | _thumbnail_id | 457 | | 400 | [Windows] Outil pour créer des clefs USB bootable | NULL | NULL | NULL | NULL | | 405 | [Windows/vSphere 5.5] Pas de réseau au reboot | 1160 | 405 | _thumbnail_id | 409 | +-----+--------------------------------------------------------------------------------------+---------+---------+---------------+------------+ 66 rows in set (0.01 sec)

 

J’en ai donc extra-paulé (pardon, elle était trop facile celle la … :D) une requête pour **ajouter **une image à la une sur des articles qui n’en n’ont pas.

insert into wp_postmeta(meta_key,meta_value,post_id) values ('_thumbnail_id', '457', '27');

Cette requête ajoute l’image [![Linux](https://techan.fr/images/2014/11/Linux.png)](https://techan.fr/images/2014/11/Linux.png) comme image à la une de l’article [Ajouter des clefs SSH pour se connecter sur un boîtier RecoverPoint](https://techan.fr/ajouter-des-clefs-ssh-pour-se-connecter-sur-un-boitier-recoverpoint/ "Ajouter des clefs SSH pour se connecter sur un boîtier RecoverPoint").

On passe la requête, on rafraichit la page, et l’image apparait comme par magie (ou presque !).

 


